<mat-expansion-panel (window:resize)="onResize()">
    <mat-expansion-panel-header collapsedHeight="84px" expandedHeight="84px">
        <mat-panel-title>
            <mat-form-field appearance="standard" (click)="$event.cancelBubble = true">
                <mat-label>
                    <img class="input-image" src="assets/icons/png/flocking.png" aria-hidden="true">
                    Search birds and bonus cards
                </mat-label>
                <input matInput autocomplete="off" [(ngModel)]='query.main' (ngModelChange)="onQueryChange()"
                    (keydown)="onKeyDown($event)">
                <button mat-icon-button *ngIf="query.main" matSuffix aria-label="Clear"
                    (click)="query.main=''; onQueryChange()">
                    <mat-icon>close</mat-icon>
                </button>
                <mat-hint>Use card name or description</mat-hint>
            </mat-form-field>
            <app-stats *ngIf="canFitStats" [mobile]="false" [habitatControls]="query.habitat"
                (statsChange)="onStatsChange($event)"></app-stats>
        </mat-panel-title>
    </mat-expansion-panel-header>
    <mat-form-field class="long-field" appearance="standard">
        <mat-label>
            <img class="input-image" src="assets/cards/backgrounds/bonus-background.jpg" aria-hidden="true">
            Search birds by applicable bonus card
        </mat-label>
        <mat-hint>Use bonus card name or condition</mat-hint>
        <input #bonusInput type="text" matInput [(ngModel)]="bonusfield" (ngModelChange)="onBonusChange()"
            [matAutocomplete]="auto">
        <button mat-icon-button *ngIf="bonusfield" matSuffix aria-label="Clear"
            (click)="bonusfield=''; query.bonus=''; onBonusChange(); onQueryChange()">
            <mat-icon>close</mat-icon>
        </button>
        <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete"
            (optionSelected)="query.bonus = bonusfield; onQueryChange()">
            <mat-option class="bonus-card-option" *ngFor="let card of filteredBonusCards | async"
                [value]="card['Name']">
                <app-bonus-card-option [card]="card"></app-bonus-card-option>
            </mat-option>
        </mat-autocomplete>
    </mat-form-field>
    <div class="row">
        <span class="clickable" [ngClass]="{inactive: !query.expansion.european}"
            (click)="toggleExpansion('european');">
            <img class="expansion-image" src="assets/icons/png/european.png" aria-hidden="false"
                aria-label="Toggle european expansion">
            <div class="description"> European expansion</div>
        </span>
    </div>
    <div class="row">
        <button mat-raised-button color="primary" aria-label="Reset all filters" (click)="clearFilter()">
            Reset <mat-icon>filter_alt</mat-icon>
        </button>
    </div>
    <app-stats *ngIf="!canFitStats" [mobile]="true" [habitatControls]="query.habitat"
        (statsChange)="onStatsChange($event)"></app-stats>
</mat-expansion-panel>